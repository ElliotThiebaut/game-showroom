generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id            String   @id @default(uuid())
  username      String   @unique
  email         String   @unique
  tutorial      Boolean  @default(true)
  role          Role     @default(USER)
  answeredGames String[] @default([])
  isDeleted     Boolean  @default(false)
  created_at    DateTime @default(now())

  answers Answers[]
}

enum Role {
  USER
  ADMIN
}

model Game {
  id           String   @id @default(uuid())
  name         String
  category     String
  description  String
  designers    String[]
  illustrators String[]
  imgUrl       String?
  videoUrl     String?
  isDeleted    Boolean  @default(false)
  created_at   DateTime @default(now())

  gameQuestions GameQuestion[]
}

model GameQuestion {
  id             String       @id @default(uuid())
  game_id        String
  videoTimestamp Int
  questionType   QuestionType
  question       String
  defaultAnswers String[]
  isDeleted      Boolean      @default(false)
  created_at     DateTime     @default(now())

  game    Game      @relation(fields: [game_id], references: [id])
  answers Answers[]
}

enum QuestionType {
  TEXT
  SELECT
  SELECT_MULTIPLE
  RANGE
}

model Answers {
  user_id         String
  gameQuestion_id String
  answer          String
  created_at      DateTime @default(now())
  isDeleted       Boolean  @default(false)

  user         User         @relation(fields: [user_id], references: [id])
  gameQuestion GameQuestion @relation(fields: [gameQuestion_id], references: [id])

  @@id([gameQuestion_id, user_id])
}
